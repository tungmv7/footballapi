<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<div class="block-bar">
    <h2><a href="#" title="BẢNG XẾP HẠNG">LỊCH THI ĐẤU &amp; KẾT QUẢ</a></h2>
    <div class="box-tour">
        <h3>
            <select class="sl-tour selectpicker">
                <option><span>2015/16 Giải vô địch Việt Nam</span></option>
                <option>2015/16 Giải Ngoại hạng Anh</option>
                <option>2015/16 Giải vô địch Pháp</option>
                <option>2014/15 Belgian Pro League</option>
                <option>2014/15 Giải Europa League</option>
            </select>
        </h3>
        <h4>
            <select class="sl-date selectpicker">
                <option>Tuần 01J, 08 Tháng 7</option>
                <option>Tuần 02J, 15 Tháng 7</option>
                <option>Tuần 03J, 22 Tháng 7</option>
                <option>Tuần 04J, 29 Tháng 7</option>
            </select>
        </h4>
        <div class="outer-tbl">
            <table class="table table-striped">
                <tbody>
                <tr>
                    <th scope="row">11/7</th>
                    <td>Bình Dương</td>
                    <td>2-2</td>
                    <td>Đồng Tháp</td>
                </tr>
                <tr>
                    <th scope="row">10/7</th>
                    <td>Đồng Nai</td>
                    <td>1-3</td>
                    <td>Đồng Tháp</td>
                </tr>
                <tr>
                    <th scope="row">9/7</th>
                    <td>Hải Phòng</td>
                    <td>2-0</td>
                    <td>Sanna Khánh Hòa</td>
                </tr>
                <tr>
                    <th scope="row">8/7</th>
                    <td>SHB Đà Nẵng</td>
                    <td>0-3</td>
                    <td>XSKT Cần Thơ</td>
                </tr>
                <tr>
                    <th scope="row">8/7</th>
                    <td>Than Quảng Ninh</td>
                    <td>4-3</td>
                    <td>Đồng Nai</td>
                </tr>
                <tr>
                    <th scope="row">8/7</th>
                    <td>SHB Đà Nẵng</td>
                    <td>0-3</td>
                    <td>XSKT Cần Thơ</td>
                </tr>
                <tr>
                    <th scope="row">8/7</th>
                    <td>Than Quảng Ninh</td>
                    <td>4-3</td>
                    <td>Đồng Nai</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="block-bar">
    <h2><a href="#" title="Kết quả">Bảng điểm</a></h2>
    <div class="box-score">
        <h3>
            <select class="sl-tour selectpicker">
                <option>2015/16 Giải vô địch Việt Nam</option>
                <option>2015/16 Giải vô địch Pháp</option>
                <option>2014/15 Belgian Pro League</option>
                <option>2014/15 Giải Europa League</option>
            </select>
        </h3>
        <div class="outer-tbl">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Hạng</th>
                    <th>Đội</th>
                    <th>Số trận</th>
                    <th>Hiệu số</th>
                    <th>Điểm</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th scope="row">1</th>
                    <td>Bình Dương</td>
                    <td>15</td>
                    <td>16</td>
                    <td>32</td>
                </tr>
                <tr>
                    <th scope="row">2</th>
                    <td>Thanh Hóa</td>
                    <td>15</td>
                    <td>4</td>
                    <td>31</td>
                </tr>
                <tr>
                    <th scope="row">3</th>
                    <td>SLNA</td>
                    <td>15</td>
                    <td>7</td>
                    <td>26</td>
                </tr>
                <tr>
                    <th scope="row">4</th>
                    <td>DTLA</td>
                    <td>15</td>
                    <td>6</td>
                    <td>24</td>
                </tr>
                <tr>
                    <th scope="row">5</th>
                    <td>Hải Phòng</td>
                    <td>15</td>
                    <td>6</td>
                    <td>26</td>
                </tr>
                <tr>
                    <th scope="row">6</th>
                    <td>Bình Dương</td>
                    <td>15</td>
                    <td>16</td>
                    <td>32</td>
                </tr>
                <tr>
                    <th scope="row">7</th>
                    <td>Thanh Hóa</td>
                    <td>15</td>
                    <td>4</td>
                    <td>31</td>
                </tr>
                <tr>
                    <th scope="row">8</th>
                    <td>SLNA</td>
                    <td>15</td>
                    <td>7</td>
                    <td>26</td>
                </tr>
                <tr>
                    <th scope="row">9</th>
                    <td>DTLA</td>
                    <td>15</td>
                    <td>6</td>
                    <td>24</td>
                </tr>
                <tr>
                    <th scope="row">10</th>
                    <td>Hải Phòng</td>
                    <td>15</td>
                    <td>6</td>
                    <td>26</td>
                </tr>
                <tr>
                    <th scope="row">11</th>
                    <td>Bình Dương</td>
                    <td>15</td>
                    <td>16</td>
                    <td>32</td>
                </tr>
                <tr>
                    <th scope="row">12</th>
                    <td>Thanh Hóa</td>
                    <td>15</td>
                    <td>4</td>
                    <td>31</td>
                </tr>
                <tr>
                    <th scope="row">13</th>
                    <td>SLNA</td>
                    <td>15</td>
                    <td>7</td>
                    <td>26</td>
                </tr>
                <tr>
                    <th scope="row">14</th>
                    <td>DTLA</td>
                    <td>15</td>
                    <td>6</td>
                    <td>24</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>


<script src="http://11.22.33.7:3000/socket.io/socket.io.js"></script>
<script>
    var socket = io("http://11.22.33.7:3000");
    socket.emit('initRounds', {
        name: "Premier League",
        start: 1408143600000
    });
    socket.on('rounds', function(msg){
        console.log(msg);
    });
</script>
<script>
    $(document).ready(function(){





//        SPORTAPI.getSessons();
//        SPORTAPI.getRounds('2');
//        SPORTAPI.getCompetitions();
//        SPORTAPI.getMatches();
//        SPORTAPI.getLeagueTables('competition_id=2');
//        SPORTAPI.getLeagueTables('round_id=435');
//        SPORTAPI.getLeagueTables('team_id=18');
    });


    var SPORTAPI = {
        init: function() {
            this.url = "https://api.crowdscores.com/api/v1/";
        },
        getMatches: function() {
            this.init();
            this.url += 'matches?round_ids=107';
            this.getData(this.url, function (status, data) {
                console.log(data);
            });
        },
        getSessons: function() {
            this.init();
            this.url += 'seasons';
            this.getData(this.url, function (status, data) {
                console.log(data);
            });
        },
        getCompetitions: function () {
            this.init();
            this.url += 'competitions';
            this.getData(this.url, function (status, data) {
                data.forEach(function (element) {
                    if (element.dbid == 2) {
                        console.log(element);
                    }
                    //console.log(element.dbid + '-' + element.fullName);
                });
            });
        },
        getLeagueTables: function (competition) {
            this.init();
            this.url += 'league-tables?' + competition;
            this.getData(this.url, function (status, tables) {
                tables.forEach(function (data) {
                    var tabId = 'tab-' + data.competition.dbid;

                    var html = '<div class="panel panel-default">';

                    // insert heading
                    html += '<div class="panel-heading" role="tab" id="heading-' + tabId + '">';
                    html += '<h4 class="panel-title">';
                    html += '<a role="button" data-toggle="collapse" data-parent="#accordion" href="#body-' + tabId + '" aria-expanded="true" aria-controls="collapseOne">';
                    html += data.competition.name + ' <i class="fa fa-caret-right"></i>';
                    html += '</a>';
                    html += '</h4>';
                    html += "</div>";

                    // insert body
                    html += '<div id="#body-' + tabId + '" class="panel-collapse collapse in" role="tabpanel">';
                    html += '<div class="panel-body">';

                    html += '<table class="table table-striped">';
                    html += '<thead><tr><th>Hạng</th><th>Đội</th><th>Số trận</th><th>Hiệu số</th><th>Điểm</th></tr></thead>';
                    data.leagueTable.forEach(function (team) {
                        html += '<tr>';
                        html += '<td>' + team.position + '</td>';
                        html += '<td>' + team.name + '</td>';
                        html += '<td>' + team.gamesPlayed + '</td>';
                        html += '<td>' + team.goalDiff + '</td>';
                        html += '<td>' + team.points + '</td>';
                        html += '</tr>';
                    });
                    html += '</table>';

                    html += "</div>";
                    html += "</div>";

                    html += "</div>";

                    $(".panel-group").append(html);

                });
            });
        },
        getRounds: function() {
            this.init();
            this.url += 'rounds';
            this.getData(this.url, function (status, rounds) {
                rounds.forEach(function(data) {
                    //if (data.season.name = '2014/2015') {
                    if (data.name == "Premier League" && data.schedStart >= 1408143600000) {
                        console.log(data.dbid);
                        SPORTAPI.getLeagueTables('round_id=' + data.dbid);
                    }
                });
            });
        },
        getData: function(api, callback) {
            $.ajax({
                url: api,
                type: "GET",
                data: {api_key: "cacdc8be3bec4246a684243ede998313"},
                success: function(e) {
                    callback(1, e);
                },
                error: function(e) {
                    callback(0, e);
                }
            });
        }
    };
</script>

</body>
</html>